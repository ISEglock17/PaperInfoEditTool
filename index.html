

<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>論文情報管理ツール</title>
    <style>
        body {
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
            background: #f8f9fa;
            color: #212529;
            margin: 0;
            padding: 20px;
          }
          
          h2 {
            margin-top: 1.5em;
            font-size: 1.4em;
            border-bottom: 2px solid #dee2e6;
            padding-bottom: 4px;
            color: #343a40;
          }
          
          .container {
            display: flex;
            flex-direction: column;
          }
          
          .paper-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
          }
          
          .paper-list button {
            background-color: #6c757d; /* Bootstrapのsecondary色風 */
            color: white;
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            font-size: 0.9em;
            cursor: pointer;
          }
          
          .paper-list button:hover {
            background-color: #5a6268;
          }
          

          @media screen and (min-width: 1024px) {
            .container {
              flex-direction: row;
              gap: 30px;
            }
          
            .main-form {
              flex: 3;
            }
          
            .list-container {
              flex: 1;
              max-height: 100vh;
              overflow-y: auto;
              position: sticky;
              top: 20px;
              background: #fff;
              border-radius: 12px;
              padding: 16px;
              box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            }
          }
          
          .card {
            background: #fff;
            padding: 20px;
            margin-top: 1em;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
          }
          
          button {
            background-color: #4f46e5;
            color: white;
            padding: 10px 16px;
            border: none;
            border-radius: 8px;
            margin: 4px 0;
            cursor: pointer;
            font-size: 0.95em;
            transition: background-color 0.2s ease-in-out;
          }
          
          button:hover {
            background-color: #4338ca;
          }
          
          input, textarea {
            width: 100%;
            padding: 10px;
            margin-top: 4px;
            margin-bottom: 12px;
            border: 1px solid #ced4da;
            border-radius: 6px;
            font-size: 0.95em;
            background-color: #fdfdfd;
          }
          
          label {
            font-weight: 600;
            margin-top: 8px;
            display: block;
          }
          
          .output {
            white-space: pre-wrap;
            background-color: #f1f3f5;
            border-radius: 10px;
            padding: 16px;
            margin-top: 10px;
            border: 1px solid #dee2e6;
            font-size: 0.92em;
          }
          

    </style>
</head>
<body>
    <div class="container">
        <div class="main-form">
            <h1>論文情報管理ツール</h1>
            <div class="card">
                <h2>論文情報入力</h2>
                <!-- フォーム要素ここに -->

                <label for="title">論文タイトル</label>
                <input type="text" id="title">
    
                <label for="url">論文URL</label>
                <input type="text" id="url">
    
                <label for="citation">引用文</label>
                <textarea id="citation" rows="4"></textarea>
    
                <label for="conference">国際会議名</label>
                <input type="text" id="conference">
    
                <label for="year">公開年</label>
                <input type="text" id="year">
    
                <label for="rank">オススメランク</label>
                <select id="rank">
                    <option value="S">S</option>
                    <option value="A+">A+</option>
                    <option value="A">A</option>
                    <option value="A-">A-</option>
                    <option value="B+">B+</option>
                    <option value="B">B</option>
                    <option value="B-">B-</option>
                    <option value="C+">C+</option>
                    <option value="C">C</option>
                    <option value="C-">C-</option>
                </select>
    
                <label for="introducer">紹介者</label>
                <input type="text" id="introducer">
    
                <label for="comment1">コメント</label>
                <textarea id="comment1" rows="3"></textarea>
    
                <label for="comment2">コメント2</label>
                <textarea id="comment2" rows="3"></textarea>
    
                <label for="abstract">概要(Abstract)</label>
                <textarea id="abstract" rows="5"></textarea>
    
                <label for="tags">タグ</label>
                <input type="text" id="tags">

                <button onclick="generateOutput()">出力を生成</button>
                <button onclick="addPaperToList()">論文情報を追加</button>
                <button onclick="clearForm()">入力をリセット</button>
            </div>

  
            <div class="card">
                <h2>出力情報1</h2>
                <button onclick="copyToClipboard('output')">出力1をコピー</button>
                <div id="output" class="output"></div>
            </div>
          
            <div class="card">
                <h2>出力情報2</h2>
                <button onclick="copyToClipboard('plainOutput')">出力2をコピー</button>
                <div id="plainOutput" class="output"></div>
            </div>
        </div>

        <div class="list-container">
            <h2>論文一覧</h2>
            <div class="paper-list" id="paperList"></div>
            
            <h2>データ管理</h2>
                <button onclick="exportPapers()">論文情報をエクスポート</button>
                <input type="file" id="importFile" accept=".json" onchange="importPapers()" />              
            </div>
        </div>
    </div>

    <script>
        const papers = [];

        function generateOutput() {
            const title = document.getElementById('title').value;
            const url = document.getElementById('url').value;
            const citation = document.getElementById('citation').value.replace(new RegExp(title, 'g'), `[${title} ${url}]`);
            const conference = document.getElementById('conference').value;
            const year = document.getElementById('year').value;
            const rank = document.getElementById('rank').value;
            const introducer = document.getElementById('introducer').value;
            const comment1 = document.getElementById('comment1').value;
            const comment2 = document.getElementById('comment2').value;
            const abstract = document.getElementById('abstract').value;
            const tags = document.getElementById('tags').value;
        
            const output =
`${title}

[**** 紹介者]
#${introducer}

[**** 文献情報]
${citation}

[*** 論文内容]
[**** 概要]
>${abstract}

[**** どんな研究か]

[**** 先行研究と比べてどこがすごいか]

[**** 技術や手法の要点は]

[**** どうやって有効性を検証したか]

[**** 不十分な点や弱点は何か]

[**** 用語解説]

[**** タグ]
#${conference}${year}
${tags}`;

    const plainOutput =
`論文タイトル: ${title}
論文URL: ${url}
引用文: ${citation}
国際会議名: ${conference}
公開年: ${year}
オススメランク: ${rank}
紹介者: ${introducer}
コメント: ${comment1}
コメント2: ${comment2}
概要: ${abstract}
タグ: ${tags}`;
        
            document.getElementById('output').textContent = output;
            document.getElementById('plainOutput').textContent = plainOutput;
        }
        

        function addPaperToList() {
            const title = document.getElementById('title').value;
            const url = document.getElementById('url').value;
            const citation = document.getElementById('citation').value;
            const conference = document.getElementById('conference').value;
            const year = document.getElementById('year').value;
            const rank = document.getElementById('rank').value;
            const introducer = document.getElementById('introducer').value;
            const comment1 = document.getElementById('comment1').value;
            const comment2 = document.getElementById('comment2').value;
            const abstract = document.getElementById('abstract').value;
            const tags = document.getElementById('tags').value;

            const paper = { title, url, citation, conference, year, rank, introducer, comment1, comment2, abstract, tags };
            papers.push(paper);

            const paperList = document.getElementById('paperList');
            const button = document.createElement('button');
            button.textContent = title;
            button.onclick = () => displayPaper(paper);
            paperList.appendChild(button);
        }

        function clearInputs() {
            const ids = ['title', 'url', 'citation', 'conference', 'year', 'rank', 'introducer', 'comment1', 'comment2', 'abstract', 'tags'];
            ids.forEach(id => document.getElementById(id).value = '');
            document.getElementById('output').textContent = '';
            document.getElementById('plainOutput').textContent = '';
        }
        
        function displayPaper(paper) {
            document.getElementById('title').value = paper.title;
            document.getElementById('url').value = paper.url;
            document.getElementById('citation').value = paper.citation;
            document.getElementById('conference').value = paper.conference;
            document.getElementById('year').value = paper.year;
            document.getElementById('rank').value = paper.rank;
            document.getElementById('introducer').value = paper.introducer;
            document.getElementById('comment1').value = paper.comment1;
            document.getElementById('comment2').value = paper.comment2;
            document.getElementById('abstract').value = paper.abstract;
            document.getElementById('tags').value = paper.tags;
        
            generateOutputFromPaper(paper);  // 出力エリアも更新
        }
        
        function generateOutputFromPaper(paper) {
            const citationWithLink = paper.citation.replace(new RegExp(paper.title, 'g'), `[${paper.title} ${paper.url}]`);
            const output = 
`${paper.title}

[**** 紹介者]
#${paper.introducer}

[**** 文献情報]
${citationWithLink}

[*** 論文内容]
[**** 概要]
>${paper.abstract}

[**** どんな研究か]

[**** 先行研究と比べてどこがすごいか]

[**** 技術や手法の要点は]

[**** どうやって有効性を検証したか]

[**** 不十分な点や弱点は何か]

[**** 用語解説]

[**** タグ]
#${paper.conference}${paper.year}
${paper.tags}
`;

    const plainOutput = `
論文タイトル: ${paper.title}
論文URL: ${paper.url}
引用文: ${paper.citation}
国際会議名: ${paper.conference}
公開年: ${paper.year}
オススメランク: ${paper.rank}
紹介者: ${paper.introducer}
コメント: ${paper.comment1}
コメント2: ${paper.comment2}
概要: ${paper.abstract}
タグ: ${paper.tags}
`;
        
            document.getElementById('output').textContent = output;
            document.getElementById('plainOutput').textContent = plainOutput;
        }
        
        function copyToClipboard(elementId) {
            const text = document.getElementById(elementId).textContent;
            navigator.clipboard.writeText(text).then(() => {
                alert('コピーしました');
            });
        }
        
        function exportPapers() {
            const dataStr = JSON.stringify(papers, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'papers.json';
            a.click();
            URL.revokeObjectURL(url);
        }

        function importPapers() {
            const fileInput = document.getElementById('importFile');
            const file = fileInput.files[0];
            const reader = new FileReader();
            reader.onload = function(e) {
                const importedPapers = JSON.parse(e.target.result);
                papers.push(...importedPapers);
                const paperList = document.getElementById('paperList');
                importedPapers.forEach(paper => {
                    const button = document.createElement('button');
                    button.textContent = paper.title;
                    button.onclick = () => displayPaper(paper);
                    paperList.appendChild(button);
                });
            };
            reader.readAsText(file);
        }

        function addPaperToList() {
            const title = document.getElementById('title').value;
            const url = document.getElementById('url').value;
            const citation = document.getElementById('citation').value;
            const conference = document.getElementById('conference').value;
            const year = document.getElementById('year').value;
            const rank = document.getElementById('rank').value;
            const introducer = document.getElementById('introducer').value;
            const comment1 = document.getElementById('comment1').value;
            const comment2 = document.getElementById('comment2').value;
            const abstract = document.getElementById('abstract').value;
            const tags = document.getElementById('tags').value;
        
            const paper = { title, url, citation, conference, year, rank, introducer, comment1, comment2, abstract, tags };
            papers.push(paper);
        
            renderPaperList();  // 新しい表示関数を呼び出す
        }
        
        function renderPaperList() {
            const paperList = document.getElementById('paperList');
            paperList.innerHTML = ''; // クリアして再描画
        
            papers.forEach((paper, index) => {
                const container = document.createElement('div');
                container.style.display = 'flex';
                container.style.justifyContent = 'space-between';
                container.style.alignItems = 'center';
                container.style.gap = '10px';
        
                const button = document.createElement('button');
                button.textContent = paper.title;
                button.onclick = () => displayPaper(paper);
                button.style.flexGrow = '1';
        
                const deleteBtn = document.createElement('button');
                deleteBtn.textContent = '削除';
                deleteBtn.style.backgroundColor = '#dc3545';
                deleteBtn.style.color = 'white';
                deleteBtn.style.border = 'none';
                deleteBtn.style.borderRadius = '4px';
                deleteBtn.style.padding = '6px 10px';
                deleteBtn.style.cursor = 'pointer';
                deleteBtn.onclick = () => {
                    papers.splice(index, 1); // 配列から削除
                    renderPaperList();       // 再描画
                };
        
                container.appendChild(button);
                container.appendChild(deleteBtn);
                paperList.appendChild(container);
            });
        }
        

    </script>
</body>
</html>
